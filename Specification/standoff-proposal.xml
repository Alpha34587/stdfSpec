<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="http://www.tei-c.org/release/xml/tei/custom/schema/relaxng/tei_all.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>
<?xml-model href="http://www.tei-c.org/release/xml/tei/custom/schema/relaxng/tei_all.rng" type="application/xml"
	schematypens="http://purl.oclc.org/dsdl/schematron"?>
<TEI xmlns="http://www.tei-c.org/ns/1.0" xmlns:rng="http://relaxng.org/ns/structure/1.0">
    <teiHeader>
        <fileDesc>
            <titleStmt>
                <title>Proposal for encoding standoff annotations in TEI</title>
                <author>
                    <persName>
                        <forename>Peter</forename>
                        <surname>Stadler</surname>
                    </persName>
                </author>
                <author>
                    <persName>
                        <forename>Laurent</forename>
                        <surname>Romary</surname>
                    </persName>
                </author>
            </titleStmt>
            <publicationStmt>
                <authority>Berlin task force "standoff"</authority>
                <availability>
                    <!-- no lincence allowed -->
                    <p>CC+BY and BSD-2 licences</p>
                </availability>
            </publicationStmt>
            <sourceDesc>
                <p>...</p>
            </sourceDesc>
        </fileDesc>
    </teiHeader>
    <text>
        <body>
            <schemaSpec ident="standoff-proposal" start="TEI teiCorpus" status="unstable">
                <moduleRef key="tei"/>
                <moduleRef key="core"/>
                <moduleRef key="analysis"/>
                <moduleRef key="certainty"/>
                <moduleRef key="corpus"/>
                <moduleRef key="dictionaries"/>
                <moduleRef key="drama"/>
                <moduleRef key="figures"/>
                <moduleRef key="gaiji"/>
                <moduleRef key="header"/>
                <moduleRef key="iso-fs"/>
                <moduleRef key="linking"/>
                <moduleRef key="msdescription"/>
                <moduleRef key="namesdates"/>
                <moduleRef key="nets"/>
                <moduleRef key="spoken"/>
                <moduleRef key="textcrit"/>
                <moduleRef key="textstructure"/>
                <moduleRef key="transcr"/>
                <moduleRef key="verse"/>
                <moduleRef key="tagdocs"/>

                <moduleSpec ident="stand-off">
                    <desc>Elements to allow stand-off annotations in a TEI document</desc>
                </moduleSpec>

                <elementSpec ident="stdf" mode="add" ns="http://standoff.proposal"
                    module="stand-off">
                    <desc>Container element for standoff annotations</desc>
                    <classes>
                        <memberOf key="model.resourceLike" mode="add"/>
                        <memberOf key="att.global" mode="add"/>
                        <memberOf key="att.datcat" mode="add"/>
                        <memberOf key="att.ascribed" mode="add"/>
                        <memberOf key="att.datable.w3c" mode="add"/>
                        <memberOf key="att.typed" mode="add"/>
                        <memberOf key="att.responsibility" mode="add"/>
                        <memberOf key="att.pointing" mode="add"/>
                    </classes>
                    <content>
                        <rng:optional>
                            <rng:ref name="soHeader"/>
                        </rng:optional>
                        <rng:optional>
                            <rng:ref name="annotations"/>
                        </rng:optional>
                        <rng:zeroOrMore>
                            <rng:ref name="stdf"/>
                        </rng:zeroOrMore>
                    </content>
                </elementSpec>

                <elementSpec ident="soHeader" mode="add" ns="http://standoff.proposal"
                    module="stand-off">
                    <desc>Metadata for the <gi>stdf</gi> element(s)</desc>
                    <content>
                        <rng:interleave>
                            <rng:optional>
                                <rng:ref name="titleStmt"/>
                            </rng:optional>
                            <rng:optional>
                                <rng:ref name="publicationStmt"/>
                            </rng:optional>
                            <rng:optional>
                                <rng:ref name="notesStmt"/>
                            </rng:optional>
                            <rng:optional>
                                <rng:ref name="encodingDesc"/>
                            </rng:optional>
                            <rng:optional>
                                <rng:ref name="profileDesc"/>
                            </rng:optional>
                            <rng:optional>
                                <rng:ref name="revisionDesc"/>
                            </rng:optional>
                        </rng:interleave>
                    </content>
                </elementSpec>

                <elementSpec ident="annotations" mode="add" ns="http://standoff.proposal"
                    module="stand-off">
                    <desc>Content of the <gi>stdf</gi> element</desc>
                    <classes>
                        <memberOf key="att.global" mode="add"/>
                    </classes>
                    <content>
                        <rng:zeroOrMore>
                            <rng:ref name="model.annotationPart"/>
                        </rng:zeroOrMore>
                    </content>
                </elementSpec>

                <elementSpec ident="mapStruct" mode="add" ns="http://standoff.proposal"
                    module="stand-off">
                    <desc>Any element is to be interpreted as mapping its structure onto a text to
                        be annotated</desc>
                    <classes>
                        <memberOf key="model.annotationPart" mode="add"/>
                    </classes>
                    <!-- need a specific namespace? -->
                    <!-- like in egXML -->
                </elementSpec>


                <elementSpec ident="annotationGrp" mode="add" ns="http://standoff.proposal"
                    module="stand-off">
                    <desc>Groups together various annotations, for instance for parallel
                        interpretations of a spoken segment</desc>
                    <classes>
                        <memberOf key="model.annotationPart"/>
                        <memberOf key="model.divPart.spoken"/>
                        <memberOf key="att.timed"/>
                        <memberOf key="att.global"/>
                        <memberOf key="att.ascribed"/>
                        <memberOf key="att.typed"/>
                        <!-- should be declarable (to point to specific availability or responsability or version layers) -->
                    </classes>
                    <content>
                        <rng:zeroOrMore>
                            <rng:choice>
                                <rng:ref name="u"/>
                                <rng:ref name="model.annotationPart"/>
                            </rng:choice>
                        </rng:zeroOrMore>
                    </content>
                </elementSpec>

                <classSpec type="model" ident="model.annotationPart" mode="add" module="stand-off">
                    <desc>Initially empty class for providing easy customization with additional TEI
                        elements or external schemas, e.g. PAULA</desc>
                </classSpec>

                <!--       *****       -->
                <!-- Following are existing TEI declarations where we add our new class(es) -->

                <classSpec type="model" ident="model.global.meta" mode="change">
                    <classes mode="change">
                        <memberOf key="model.annotationPart" mode="add"/>
                    </classes>
                </classSpec>

                <classSpec type="model" ident="model.listLike" mode="change">
                    <classes mode="change">
                        <memberOf key="model.annotationPart" mode="add"/>
                    </classes>
                </classSpec>

                <classSpec type="model" ident="model.entryLike" mode="change">
                    <classes mode="change">
                        <memberOf key="model.annotationPart" mode="add"/>
                    </classes>
                </classSpec>

                <elementSpec ident="listBibl" mode="change" module="core">
                    <classes mode="change">
                        <memberOf key="model.annotationPart" mode="add"/>
                    </classes>
                </elementSpec>

                <elementSpec ident="listChange" mode="change" module="header">
                    <classes mode="change">
                        <memberOf key="model.annotationPart" mode="add"/>
                    </classes>
                </elementSpec>

                <!-- Need to exclude our namespace from egXML to prevent "conflicting ID-types for attribute" errors -->
                <macroSpec ident="macro.anyXML" mode="change" module="tagdocs">
                    <content>
                        <rng:element>
                            <rng:anyName>
                                <rng:except>
                                    <rng:nsName ns="http://www.tei-c.org/ns/1.0"/>
                                    <rng:name ns="http://www.tei-c.org/ns/Examples">egXML</rng:name>
                                    <rng:nsName ns="http://standoff.proposal"/>
                                </rng:except>
                            </rng:anyName>
                            <rng:zeroOrMore>
                                <rng:attribute>
                                    <rng:anyName/>
                                </rng:attribute>
                            </rng:zeroOrMore>
                            <rng:zeroOrMore>
                                <rng:choice>
                                    <rng:text/>
                                    <rng:ref name="macro.anyXML"/>
                                </rng:choice>
                            </rng:zeroOrMore>
                        </rng:element>
                    </content>
                </macroSpec>

            </schemaSpec>
        </body>
    </text>
</TEI>
